---
title: 'Final Project'
author: "Devansh Agarwal"
date: 'Due Date: 12/14/2020'
output:
  html_notebook:
    df_print: paged
  html_document:
    df_print: paged
---

```{r}
# Libraries

library(genius)
library(tidyverse)
library(qdap)
library(tidytext)
library(rvest)
```

```{r}
# Data Scraping

page = "https://en.wikipedia.org/wiki/Grammy_Award_for_Record_of_the_Year"

XPATHgen = "/html/body/div[3]/div[3]/div[5]/div[1]/table"

Music <- data.frame()

for (i in 5:8){ # Loop for each decade
  # Scrape website
  Temp <- page %>% 
    read_html() %>%
    html_nodes(xpath = paste(XPATHgen,'[',i,']',sep = '')) %>%
    html_table(fill = TRUE)
  Music <- rbind(Music,Temp[[1]])
}

rm(Temp,i,page,XPATHgen) # Remove excess data
```


```{r}
# Data Cleaning

MusicCleaned <- 
  Music %>% 
  na.omit() %>% # Remove NAs
  transmute( 
    year = gsub(pattern = '(\\[\\d+\\])',replacement = '',x = `Year[I]`),
    track = Record,
    artist = `Artist(s)`
  ) %>%
  mutate(
    decade = paste(substr(year,1,3),'0s',sep = '')
  )



```

